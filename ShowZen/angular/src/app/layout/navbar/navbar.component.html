<nav class="navbar" [class.scrolled]="isScrolled">
    <div class="navbar-container">
        <!-- Logo -->
        <div class="navbar-brand">
            <a routerLink="/" class="logo-link" (click)="closeMobileMenu()">
                <span class="logo-icon">üé≠</span>
                <span class="logo-text">ShowZen</span>
            </a>
        </div>

        <!-- Desktop Menu (hidden on mobile) -->
        <div class="navbar-menu desktop-only">
            <a routerLink="/schedule-overview" routerLinkActive="active" class="nav-item">
                <i class="fas fa-calendar me-2"></i>
                <span>Agenda</span>
            </a>
            <a routerLink="/crm" routerLinkActive="active" class="nav-item">
                <i class="fas fa-columns me-2"></i>
                <span>Pipeline</span>
            </a>
            <a routerLink="/clients" routerLinkActive="active" class="nav-item">
                <i class="fas fa-briefcase me-2"></i>
                <span>Clientes</span>
            </a>
            <a routerLink="/artists" routerLinkActive="active" class="nav-item">
                <i class="fas fa-users me-2"></i>
                <span>Artistas</span>
            </a>
            <a routerLink="/dashboard" routerLinkActive="active" class="nav-item">
                <i class="fas fa-tachometer-alt me-2"></i>
                <span>Dashboard</span>
            </a>
        </div>

        <!-- Actions (Desktop) -->
        <div class="navbar-actions desktop-only">
            <!-- Language Selector -->
            <div class="language-selector">
                <button class="lang-btn" (click)="toggleLanguageDropdown()" aria-label="Select language">
                    <span class="flag">{{ currentLanguage.flagIcon }}</span>
                    <span class="lang-name">{{ currentLanguage.displayName }}</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="lang-dropdown" *ngIf="isLanguageDropdownOpen">
                    <button *ngFor="let lang of languages" class="lang-option"
                        (click)="changeLanguage(lang.cultureName)">
                        <span class="flag">{{ lang.flagIcon }}</span>
                        <span>{{ lang.displayName }}</span>
                    </button>
                </div>
            </div>

            <!-- User Profile or Login -->
            <div class="navbar-user" *ngIf="isAuthenticated">
                <a routerLink="/account/manage" class="user-profile-link" title="Gerenciar Perfil">
                    <div class="user-avatar">
                        {{ (currentUser?.userName || 'U')[0].toUpperCase() }}
                    </div>
                    <span class="user-name">{{ currentUser?.userName }}</span>
                </a>

                <!-- Admin Menu Dropdown -->
                <div class="admin-menu">
                    <button class="admin-btn" (click)="toggleAdminDropdown()" title="Administra√ß√£o">
                        <i class="fas fa-cog"></i>
                    </button>
                    <div class="admin-dropdown" *ngIf="isAdminDropdownOpen">
                        <div class="dropdown-header">Administra√ß√£o</div>
                        <a routerLink="/identity/users" class="dropdown-item" (click)="isAdminDropdownOpen = false">
                            <i class="fas fa-users"></i>
                            <span>Usu√°rios</span>
                        </a>
                        <a routerLink="/identity/roles" class="dropdown-item" (click)="isAdminDropdownOpen = false">
                            <i class="fas fa-key"></i>
                            <span>Perfis</span>
                        </a>
                        <a routerLink="/tenant-management/tenants" class="dropdown-item"
                            (click)="isAdminDropdownOpen = false">
                            <i class="fas fa-building"></i>
                            <span>Inquilinos</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a routerLink="/setting-management" class="dropdown-item" (click)="isAdminDropdownOpen = false">
                            <i class="fas fa-sliders-h"></i>
                            <span>Configura√ß√µes</span>
                        </a>
                    </div>
                </div>

                <button class="logout-btn" (click)="logout()" title="Sair">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
            <button class="login-btn" *ngIf="!isAuthenticated" (click)="login()">
                <i class="fas fa-sign-in-alt me-2"></i>
                <span>Login</span>
            </button>
        </div>

        <!-- Mobile Hamburger Button -->
        <button class="hamburger mobile-only" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()"
            aria-label="Toggle menu">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>
    </div>
</nav>

<!-- Mobile Sidebar Drawer -->
<div class="mobile-sidebar" [class.open]="isMobileMenuOpen">
    <div class="sidebar-header">
        <span class="logo-text">ShowZen</span>
        <button class="close-btn" (click)="closeMobileMenu()" aria-label="Close menu">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <nav class="sidebar-menu">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="menu-item"
            (click)="closeMobileMenu()">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a routerLink="/schedule-overview" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()">
            <i class="fas fa-calendar"></i>
            <span>Agenda</span>
        </a>
        <a routerLink="/crm" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()">
            <i class="fas fa-columns"></i>
            <span>Pipeline</span>
        </a>
        <a routerLink="/clients" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()">
            <i class="fas fa-briefcase"></i>
            <span>Clientes</span>
        </a>
        <a routerLink="/artists" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()">
            <i class="fas fa-users"></i>
            <span>Artistas</span>
        </a>
        <a routerLink="/dashboard" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>

        <!-- Admin Section (Mobile) -->
        <div class="menu-section-divider" *ngIf="isAuthenticated"></div>
        <div class="menu-section-title" *ngIf="isAuthenticated">Administra√ß√£o</div>
        <a routerLink="/identity/users" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()"
            *ngIf="isAuthenticated">
            <i class="fas fa-users"></i>
            <span>Usu√°rios</span>
        </a>
        <a routerLink="/identity/roles" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()"
            *ngIf="isAuthenticated">
            <i class="fas fa-key"></i>
            <span>Perfis</span>
        </a>
        <a routerLink="/tenant-management/tenants" routerLinkActive="active" class="menu-item"
            (click)="closeMobileMenu()" *ngIf="isAuthenticated">
            <i class="fas fa-building"></i>
            <span>Inquilinos</span>
        </a>
        <a routerLink="/setting-management" routerLinkActive="active" class="menu-item" (click)="closeMobileMenu()"
            *ngIf="isAuthenticated">
            <i class="fas fa-sliders-h"></i>
            <span>Configura√ß√µes</span>
        </a>
    </nav>

    <!-- Mobile Sidebar Footer -->
    <div class="sidebar-footer">
        <!-- User Profile (if authenticated) -->
        <a routerLink="/account/manage" class="user-profile" *ngIf="isAuthenticated" (click)="closeMobileMenu()">
            <div class="user-avatar">
                {{ (currentUser?.userName || 'U')[0].toUpperCase() }}
            </div>
            <div class="user-info">
                <div class="user-name">{{ currentUser?.userName }}</div>
                <div class="user-email caption">{{ currentUser?.email }}</div>
            </div>
        </a>

        <!-- Language Selector (Mobile) -->
        <div class="mobile-lang-selector">
            <div class="lang-label caption">Idioma</div>
            <button *ngFor="let lang of languages" class="lang-option"
                [class.active]="lang.cultureName === currentLanguage.cultureName"
                (click)="changeLanguage(lang.cultureName)">
                <span class="flag">{{ lang.flagIcon }}</span>
                <span>{{ lang.displayName }}</span>
            </button>
        </div>

        <!-- Login/Logout Button (Mobile) -->
        <button class="mobile-auth-btn" *ngIf="isAuthenticated" (click)="logout(); closeMobileMenu()">
            <i class="fas fa-sign-out-alt"></i>
            <span>Sair</span>
        </button>
        <button class="mobile-auth-btn primary" *ngIf="!isAuthenticated" (click)="login(); closeMobileMenu()">
            <i class="fas fa-sign-in-alt"></i>
            <span>Login</span>
        </button>
    </div>
</div>

<!-- Overlay (shown when mobile menu is open) -->
<div class="mobile-overlay" [class.visible]="isMobileMenuOpen" (click)="closeMobileMenu()"></div>