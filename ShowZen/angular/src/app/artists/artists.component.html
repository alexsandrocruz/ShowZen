<div class="page-container">
    <!-- Premium Header -->
    <div class="page-header">
        <div class="page-header-content">
            <div class="page-title-wrapper">
                <i class="fas fa-users page-icon"></i>
                <div>
                    <h2 class="page-title">{{ '::Artists' | abpLocalization }}</h2>
                    <p class="page-subtitle">{{ artists.totalCount }} {{ '::Artists' | abpLocalization }}</p>
                </div>
            </div>
            <div class="header-actions">
                <div class="btn-group me-3" role="group">
                    <button type="button" class="btn btn-outline-secondary" [class.active]="viewMode === 'table'"
                        (click)="viewMode = 'table'" title="Tabela">
                        <i class="fa fa-list"></i>
                    </button>
                    <button type="button" class="btn btn-outline-secondary" [class.active]="viewMode === 'grid'"
                        (click)="viewMode = 'grid'" title="Grade">
                        <i class="fa fa-th-large"></i>
                    </button>
                </div>
                <button *abpPermission="'ShowZen.Artists.Create'" class="btn btn-primary" type="button"
                    (click)="createArtist()">
                    <i class="fa fa-plus me-2"></i>
                    <span>{{ '::NewArtist' | abpLocalization }}</span>
                </button>
            </div>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body p-3">
            <form [formGroup]="filterForm">
                <div class="row g-3">
                    <div class="col-md-4">
                        <div class="search-wrapper">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="form-control" formControlName="filter"
                                [placeholder]="'::Search' | abpLocalization">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <select class="form-select" formControlName="type">
                            <option [ngValue]="null">{{ '::AllTypes' | abpLocalization }}</option>
                            <option *ngFor="let type of artistTypes" [ngValue]="type.value">
                                {{ '::ArtistType:' + type.label | abpLocalization }}
                            </option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <select class="form-select" formControlName="isActive">
                            <option [ngValue]="null">{{ '::AllStatus' | abpLocalization }}</option>
                            <option [ngValue]="true">{{ '::Active' | abpLocalization }}</option>
                            <option [ngValue]="false">{{ '::Inactive' | abpLocalization }}</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Table View -->
    <div class="card" *ngIf="viewMode === 'table'">
        <div class="card-body">
            <ngx-datatable [rows]="artists.items" [count]="artists.totalCount" [list]="list" default>
                <ngx-datatable-column [name]="'::ArtistName' | abpLocalization" prop="name" [minWidth]="200">
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'::ArtistType' | abpLocalization" prop="type" [minWidth]="150">
                    <ng-template let-row="row" ngx-datatable-cell-template>
                        {{ '::ArtistType:' + getArtistTypeName(row.type) | abpLocalization }}
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'::IsActive' | abpLocalization" prop="isActive" [maxWidth]="100">
                    <ng-template let-row="row" ngx-datatable-cell-template>
                        <span class="badge" [class.bg-success]="row.isActive" [class.bg-secondary]="!row.isActive">
                            {{ (row.isActive ? '::Yes' : '::No') | abpLocalization }}
                        </span>
                    </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column [name]="'::Actions' | abpLocalization" [maxWidth]="140" [sortable]="false">
                    <ng-template let-row="row" ngx-datatable-cell-template>
                        <div class="action-buttons">
                            <button *abpPermission="'ShowZen.Artists.Edit'" class="btn btn-ghost btn-sm action-btn"
                                (click)="editArtist(row.id)" title="{{ '::Edit' | abpLocalization }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button *abpPermission="'ShowZen.Artists.Delete'"
                                class="btn btn-ghost btn-sm action-btn text-danger" (click)="delete(row.id)"
                                title="{{ '::Delete' | abpLocalization }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </ng-template>
                </ngx-datatable-column>
            </ngx-datatable>
        </div>
    </div>

    <!-- Grid View (Cards) -->
    <div class="row" *ngIf="viewMode === 'grid'">
        <div class="col-xl-3 col-lg-4 col-md-6 mb-4" *ngFor="let artist of artists.items">
            <div class="artist-card-v2">
                <div class="card-body-content">
                    <div class="card-status-badge" [class.active]="artist.isActive">
                        {{ (artist.isActive ? '::Active' : '::Inactive') | abpLocalization }}
                    </div>
                    <div class="card-profile-wrapper">
                        <div class="profile-pic">
                            <img *ngIf="artist.logoUrl" [src]="artist.logoUrl" alt="Logo">
                            <i *ngIf="!artist.logoUrl" class="fas fa-user-music"></i>
                        </div>
                    </div>
                    <div class="card-text-center">
                        <h4 class="artist-name">{{ artist.name }}</h4>
                        <span class="artist-type-badge">
                            {{ '::ArtistType:' + getArtistTypeName(artist.type) | abpLocalization }}
                        </span>
                        <p class="artist-bio">{{ artist.biography | slice:0:100 }}{{ artist.biography?.length > 100 ?
                            '...' : '' }}</p>
                    </div>
                    <div class="card-footer-actions">
                        <button *abpPermission="'ShowZen.Artists.Edit'"
                            class="btn btn-outline-primary btn-sm rounded-pill" (click)="editArtist(artist.id)">
                            <i class="fas fa-edit me-1"></i> {{ '::Edit' | abpLocalization }}
                        </button>
                        <button *abpPermission="'ShowZen.Artists.Delete'"
                            class="btn btn-outline-danger btn-sm rounded-pill" (click)="delete(artist.id)">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
